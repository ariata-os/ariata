name: strava_activities
source: strava
display_name: Activities
description: Running, cycling, and other fitness activities
ingestion:
  type: pull
  batch_type: activities
  raw_data_type: StravaActivity
api:
  endpoint: https://www.strava.com/api/v3
  rate_limit: 100
  pagination: true
  max_results: 30
sync:
  schedule: '*/30 * * * *'
  type: date_range
  initial_sync_days: 90
processing:
  normalization: true
processor:
  table_name: stream_strava_activities
schema:
  table_name: stream_strava_activities
  description: Fitness activities and workouts from Strava
  columns:
  - name: activity_id
    type: bigint
    nullable: false
    description: Strava activity ID
  - name: external_id
    type: string
    max_length: 200
    nullable: true
    description: External ID from device/app
  - name: name
    type: string
    max_length: 500
    nullable: true
    description: Activity name/title
  - name: type
    type: string
    max_length: 50
    nullable: true
    description: Activity type (Run, Ride, Swim, etc.)
  - name: sport_type
    type: string
    max_length: 50
    nullable: true
    description: Specific sport type
  - name: workout_type
    type: integer
    nullable: true
    description: Workout type code
  - name: distance
    type: float
    nullable: true
    description: Distance in meters
  - name: moving_time
    type: integer
    nullable: true
    description: Moving time in seconds
  - name: elapsed_time
    type: integer
    nullable: true
    description: Total elapsed time in seconds
  - name: total_elevation_gain
    type: float
    nullable: true
    description: Total elevation gain in meters
  - name: elev_high
    type: float
    nullable: true
    description: Highest elevation in meters
  - name: elev_low
    type: float
    nullable: true
    description: Lowest elevation in meters
  - name: average_speed
    type: float
    nullable: true
    description: Average speed in meters per second
  - name: max_speed
    type: float
    nullable: true
    description: Maximum speed in meters per second
  - name: average_heartrate
    type: float
    nullable: true
    description: Average heart rate in bpm
  - name: max_heartrate
    type: float
    nullable: true
    description: Maximum heart rate in bpm
  - name: average_cadence
    type: float
    nullable: true
    description: Average cadence
  - name: average_watts
    type: float
    nullable: true
    description: Average power in watts
  - name: kilojoules
    type: float
    nullable: true
    description: Total work in kilojoules
  - name: start_date
    type: timestamp
    nullable: false
    description: Activity start time (UTC)
  - name: start_date_local
    type: timestamp
    nullable: true
    description: Activity start time (local)
  - name: timezone
    type: string
    max_length: 50
    nullable: true
    description: Timezone of the activity
  - name: achievement_count
    type: integer
    nullable: true
    description: Number of achievements
  - name: kudos_count
    type: integer
    nullable: true
    description: Number of kudos received
  - name: comment_count
    type: integer
    nullable: true
    description: Number of comments
  - name: start_latlng
    type: jsonb
    nullable: true
    description: Starting coordinates [lat, lng]
  - name: end_latlng
    type: jsonb
    nullable: true
    description: Ending coordinates [lat, lng]
  - name: map
    type: jsonb
    nullable: true
    description: Map polyline and summary
  - name: splits_metric
    type: jsonb
    nullable: true
    description: Kilometer splits
  - name: splits_standard
    type: jsonb
    nullable: true
    description: Mile splits
  - name: segment_efforts
    type: jsonb
    nullable: true
    description: Segment efforts within activity
  - name: gear
    type: jsonb
    nullable: true
    description: Equipment used
  - name: photos
    type: jsonb
    nullable: true
    description: Activity photos metadata
  - name: stats
    type: jsonb
    nullable: true
    description: Additional statistics
  - name: full_activity
    type: jsonb
    nullable: true
    description: Complete activity object for unmapped fields
  indexes:
  - columns:
    - timestamp
    type: btree
    description: Primary time-series index
  - columns:
    - start_date
    type: btree
    description: Index for activity start times
  - columns:
    - activity_id
    type: btree
    description: Index for activity lookups
  storage:
    strategy: postgres_only
    minio_fields: []
    note: All fields stay in PostgreSQL - Strava data is metrics and JSON
